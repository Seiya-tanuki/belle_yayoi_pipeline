
# Deprecation Registry

This file records code that is scheduled for removal or has been removed during refactor.

## Format (one entry per item)
- ID: CLN-XXXX
- Status: PROPOSED | REMOVED
- Area: queue | ocr | export | logs | tests | docs
- Target: file/function/symbol
- Reason: why it can be removed
- Proof:
  - rg references
  - tests proving behavior
- Rollback: commit/tag to revert

## Entries
- ID: CLN-0005
- Status: REMOVED
- Area: queue
- Target: gas/Code.js:belle_queue_ensureHeaderMap, gas/Review_v0.js:belle_queue_ensureHeaderMapForExport
- Reason: duplicate header-map helpers for queue/export; risk of drift as headers evolve
- Proof:
  - rg references: `rg -n "belle_queue_ensureHeaderMap" gas`, `rg -n "belle_queue_ensureHeaderMapForExport" gas`
  - tests: test_queue_header_map_parity.js (parity across wrappers)
- Rollback: revert c9acc1f
- ID: CLN-0006
- Status: REMOVED
- Area: queue
- Target: gas/Code.js:belle_healthCheck
- Reason: deprecated helper with no runtime or test references
- Proof:
  - rg: `rg -n "belle_healthCheck\\b" gas tests`
  - tests: npm test
- Rollback: revert eccdaea
- ID: CLN-0007
- Status: REMOVED
- Area: queue
- Target: gas/Code.js:belle_setupScriptProperties
- Reason: deprecated helper with no runtime or test references
- Proof:
  - rg: `rg -n "belle_setupScriptProperties\\b" gas tests`
  - tests: npm test
- Rollback: revert eccdaea
- ID: CLN-0008
- Status: REMOVED
- Area: queue
- Target: gas/Code.js:belle_appendRow (and its removed test wrapper)
- Reason: deprecated helper/test with no runtime or test references
- Proof:
  - rg: `rg -n "belle_appendRow\\b" gas tests`
  - tests: npm test
- Rollback: revert eccdaea
- ID: CLN-0010
  - Status: REMOVED
  - Area: config
  - Target: direct ad-hoc parsing of core Script Properties (BELLE_SHEET_ID, BELLE_DRIVE_FOLDER_ID, BELLE_OUTPUT_FOLDER_ID)
  - Reason: centralize parsing and required/default semantics in gas/Config_v0.js to reduce drift
  - Proof:
    - rg: `rg -n "BELLE_SHEET_ID|BELLE_DRIVE_FOLDER_ID|BELLE_OUTPUT_FOLDER_ID" gas`
    - tests: test_config_getters_parity.js, test_config_core_keys_callsites_smoke.js
  - Rollback: revert 95d8afd
- ID: CLN-0011
  - Status: REMOVED
  - Area: config
  - Target: legacy alias handling + centralized Script Properties access (BELLE_SHEET_NAME, BELLE_OCR_CLAIM_CURSOR)
  - Reason: resolve legacy branching in Config_v0.js and remove direct getScriptProperties calls outside Config
  - Proof:
    - rg: `rg -n "getScriptProperties\\(|ScriptProperties\\.getScriptProperties\\(" gas`
    - tests: test_config_legacy_aliases.js, test_config_sheet_log_keys_guard.js
  - Rollback: revert 9862c94 and 7e8a969
- ID: CLN-0009
- Status: REMOVED
- Area: export
- Target: gas/Review_v0.js: EXPORT_LOG schema enforcement (guard on mismatch)
- Reason: EXPORT_LOG is stateful for dedupe; should guard on schema mismatch and use header map for extra columns
- Proof:
  - tests: test_export_log_schema_guard.js
- Rollback: revert e286a58
- ID: CLN-0012
- Status: REMOVED
- Area: tests
- Target: test-only GAS entrypoints (*_test) removed from gas/*.js
- Reason: production modules should not export manual test entrypoints; tests call canonical functions directly
- Proof:
  - rg: `rg -n "function\\s+\\w+_test\\b" gas` (no matches)
  - tests: test_no_gas_test_entrypoints.js, npm test
- Rollback: revert 2b4e5b3 (and 26006ac to remove guard)
- ID: CLN-0013
- Status: REMOVED
- Area: ops
- Target: trigger audit entrypoint for removed *_test handlers
- Reason: allow audit/cleanup from Apps Script editor without Execution API
- Proof:
  - tests: test_trigger_audit_filter.js, npm test
  - checklist: docs/refactor/03_checklists.md
- Rollback: revert 5cf0239
- ID: CLN-0014
- Status: REMOVED
- Area: logs
- Target: gas/Code.js log plumbing helpers moved to gas/Log_v0.js
- Reason: isolate log sheet plumbing in a dedicated module to reduce drift
- Proof:
  - rg: `rg -n "^function belle_log_" gas` (hits only gas/Log_v0.js)
  - tests: test_log_module_boundaries.js, test_log_module_load_order_safety.js
- Rollback: revert 30151fb
- ID: CLN-0015
- Status: REMOVED
- Area: sheets
- Target: gas/Code.js + gas/Review_v0.js sheet I/O helpers moved to gas/Sheet_v0.js
- Reason: centralize spreadsheet I/O primitives and header-map utilities
- Proof:
  - rg: `rg -n "^function belle_sheet_" gas` (hits only gas/Sheet_v0.js)
  - tests: test_sheet_module_boundaries.js, test_sheet_module_load_order_safety.js
- Rollback: revert 05d9849
- ID: CLN-0016
- Status: REMOVED
- Area: drive/pdf
- Target: gas/Code.js drive listing + PDF inspection helpers moved to gas/Drive_v0.js and gas/Pdf_v0.js
- Reason: isolate Drive/PDF primitives and reduce Code.js surface area
- Proof:
  - rg: `rg -n "^function belle_pdf_" gas` (hits only gas/Pdf_v0.js)
  - rg: `rg -n "function belle_listFilesInFolder" gas` (hits only gas/Drive_v0.js)
  - tests: test_drive_module_boundaries.js, test_pdf_module_boundaries.js, test_drive_pdf_module_load_order_safety.js
- Rollback: revert 218dd90
- ID: CLN-0017
- Status: REMOVED
- Area: gemini
- Target: gas/Code.js Gemini client helpers moved to gas/Gemini_v0.js
- Reason: isolate Gemini HTTP plumbing and response parsing
- Proof:
  - rg: `rg -n "function belle_(getGeminiConfig|callGeminiOcr)" gas` (hits only gas/Gemini_v0.js)
  - rg: `rg -n "generativelanguage.googleapis.com" gas` (hits only gas/Gemini_v0.js)
  - tests: test_gemini_module_boundaries.js, test_gemini_module_load_order_safety.js, test_gemini_client_parity_smoke.js
- Rollback: revert 4993968
